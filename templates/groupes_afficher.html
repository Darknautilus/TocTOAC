{% extends 'layout.html' %}

{% block title %}Groupes{% endblock %}

{% block content %}

<h1 class="page-header">{{ groupe[0].grpname }}</h1>
<div class="row">
<div class="span9">

<h2>Description</h2>
<p align="justify"> 
{{ groupe[0].description }}
</p>

<br />
<h2>Evènements créés</h2>
<table class="table table-hover table-bordered">
	<thead>
		<tr>
			<th>Nom</th>	
			<th>Organisateur</th>
			<th>Date</th>
			<th>Heure</th>
			<th></th>
		</tr>
	<tbody>
	{% for event in events %}
		<tr>
			{% set tab = { 'idEvent' : event.eventid} %}
			<td><a href="{{ queries('events','event_detail',tab) }}">{{ event.eventname }}</a></td>
			<td>{{ event.membfirstname }} {{ event.memblastname }}</td>
			<td>{{ event.date }}</td>
			<td>{{ event.time }}</td>
			<td>
			    <div class="btn-group">
    				<button class="btn">Participer</button>
    			</div>
		</td>
		</tr>
	{% endfor %}
	</tbody>
</table>

    <div class="btn-group">
    	<button class="btn">Créer évenement</button>
    </div>
    <br />
</div>

<div class="span3">

<table class="table table-hover table-bordered">
	<thead>
	<tr>
		<th>Membres</th>
		</tr>
	</thead>
	<tbody>
	{% for membre in membres %}
		<tr>
			<td>
			<div class="span2">
			{{ membre.membfirstname }} {{ membre.memblastname }}
			</div>
			<div class="span2">
				<div class="span1">
					<div class="btn-toolbar">
						<div class="btn-group">
			    				<button class="btn-mini"><img src="/templates/profil.png" /></button>
			    				<button class="btn-mini"><img src="/templates/plus.png" /></button>
			    				<button class="btn-mini" href="#delete_confirm" data-toggle="modal"><img src="/templates/delete.png" /></button>
			    				{% import 'modal.html' as showModal %}
			    				{{ showModal.modal('delete_confirm', 'Supprimer membre ?', 'Voulez vous vraiment supprimer ce membre?', 'Oui', queries('groupes','supprimer_membre', { 'id' : membre.membid , 'idG' : groupe[0].grpid}), "Non") }}
			    		</div>
		    		</div>
	    		</div>
	    	</div>
	    	</td>
		</tr>
	{% endfor %}
		<tr>
			<td>
				<div class="btn-group">
    				<a class="btn" href = "{{ queries('groupes','afficher_membre',{'idGroupe': groupe[0].grpid}) }}">Afficher tous les membres( {{ nbMembres }} )</a>
    			</div>
		</tr>
	</tbody>
</table>
</div>
</div>
{% endblock %}